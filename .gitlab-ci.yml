stages:
  - prepare
  - test
  - build

prepare:
  image: ubuntu:latest
  script:
    - echo "Preparing the environment"
    - apt-get update
    - apt-get install -y cmake g++ python3-pip
    - pip install conan
  only:
    - main

build:
  image: ubuntu:latest
  script:
    - echo "Building the project"
    - conan install . --build=missing  # Install dependencies using Conan
    - cmake .                         # Generate build system with CMake
    - make                            # Build the project with Make
  only:
    - main
