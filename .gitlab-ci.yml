stages:
  - prepare
  - test
  - build

prepare:
  image: ubuntu:latest
  script:
    - echo "Preparing the environment"
    - apt-get update
    - apt-get install -y cmake g++ python3-pip python3-venv
    - python3 -m venv venv
    - . venv/bin/activate
    - pip install conan
  only:
    - main

build:
  image: ubuntu:latest
  script:
    - echo "Building the project"
    - conan install . --build=missing  
    - cmake .                         
    - make                           
  only:
    - main
